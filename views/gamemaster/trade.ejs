<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="/scripts/trade.js" defer></script>
    <link rel="stylesheet" href="/styles/main.css" />
    <link rel="stylesheet" href="/styles/gamemaster/trade.css" />
    <%- include("../partials/font")%>
    <title>TRADE!</title>
</head>
<body>
    <%- include("../partials/nav") %>

    <h1>GET READY TO TRADE!</h1>

    
        <form action="/gamemaster/trade?_method=PUT" method="post">
            <section class= "trader">
                <select class= "trader name" name="traderName" required >
                    <option value=""></option>
                    <% players.forEach(player => { %>
                        <option value="<%= player._id %>"><%= player.name %></option>
                    <% }) %>
                </select>

                <% players.forEach(player => { %>
                    <div class="item_quantity">
                        <select class="<%= player.name %> items" name="traderItem">
                            <option value=""></option>
                            <% player.items.forEach(item => { %>
                                <option value="<%= item.item._id %>" quantity="<%= item.quantity %>"><%= item.item.name %></option>
                            <% }) %>
                        </select>
                    </div>

                    <select class="<%= player.name %> rules" name="traderRule">
                        <option value=""></option>
                        <% player.rules.forEach(rule => { %>
                            <option value="<%= rule._id %>"><%= rule.number %></option>
                        <% }) %>
                    </select>

                <% }) %>
            </section>
    

            <section class= "tradee">
                <select class= "tradee name" name="tradeeName" required>
                    <option value=""></option>
                    <% players.forEach(player => { %>
                        <option value="<%= player._id %>"><%= player.name %></option>
                    <% }) %>
                </select>

                <% players.forEach(player => { %>
                    <div class="item_quantity"></div>
                        <select class="<%= player.name %> items" name="tradeeItem">
                            <option value=""></option>
                            <% player.items.forEach(item => { %>
                                <option value="<%= item.item._id %>" quantity="<%= item.quantity %>"><%= item.item.name %></option>
                            <% }) %>
                        </select>   
                    </div>

                    <select class="<%= player.name %> rules" name="tradeeRule">
                        <option value=""></option>
                        <% player.rules.forEach(rule => { %>
                            <option value="<%= rule._id %>"><%= rule.number %></option>
                        <% }) %>
                    </select>

                <% }) %>
            </section>

            <input type="submit" value="TRADE.">
        </form>
    

</body>
</html>